# ‚ö° –§–ê–ó–ê 1: –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ö–†–ò–¢–ò–ß–ï–°–ö–ò–• –û–®–ò–ë–û–ö

**–í—Ä–µ–º—è:** 1 —á–∞—Å  
**–¶–µ–ª—å:** –ò—Å–ø—Ä–∞–≤–∏—Ç—å —É—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏, NoneType –æ—à–∏–±–∫–∏, —Å–æ–∑–¥–∞—Ç—å TradeIt.gg –º–æ–¥—É–ª—å

---

## ‚úÖ –®–ê–ì 1.1: –ò—Å–ø—Ä–∞–≤–∏—Ç—å unclosed sessions (15 –º–∏–Ω)

### –§–∞–π–ª 1: `rust-p2p-bot/src/pulse_api.py`

**–ù–∞–π—Ç–∏ —Å—Ç—Ä–æ–∫—É 35-40:**
```python
async def _get_session(self) -> aiohttp.ClientSession:
    """–ü–æ–ª—É—á–µ–Ω–∏–µ HTTP —Å–µ—Å—Å–∏–∏"""
    if self._session is None or self._session.closed:
        self._session = aiohttp.ClientSession(headers=headers)
    return self._session
```

**–ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞:**
```python
async def _get_session(self) -> aiohttp.ClientSession:
    """–ü–æ–ª—É—á–µ–Ω–∏–µ HTTP —Å–µ—Å—Å–∏–∏"""
    if self._session is None or self._session.closed:
        headers = {
            'Api-Key': self.api_key,
            'Content-Type': 'application/json'
        }
        self._session = aiohttp.ClientSession(headers=headers)
    return self._session
```

**–ò –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `compare_tables()` (—Å—Ç—Ä–æ–∫–∞ ~80):**

**–ù–∞–π—Ç–∏:**
```python
session = await self._get_session()

try:
    url = f"{self.BASE_URL}/public-api/item/compare-tables"
    async with session.post(url, json=payload, timeout=aiohttp.ClientTimeout(total=30)) as resp:
        # ... –∫–æ–¥ ...
```

**–≠—Ç–æ —É–∂–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ!** –ù–æ –ø—Ä–æ–≤–µ—Ä—å —á—Ç–æ –≤–µ–∑–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `async with session.post()`, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ `session.post()`

---

### –§–∞–π–ª 2: `rust-p2p-bot/src/lootfarm.py`

**–ù–∞–π—Ç–∏ —Å—Ç—Ä–æ–∫—É 50-55:**
```python
async def _get_http_session(self) -> aiohttp.ClientSession:
    """–ü–æ–ª—É—á–µ–Ω–∏–µ HTTP —Å–µ—Å—Å–∏–∏ –¥–ª—è JSON API"""
    if self._http_session is None or self._http_session.closed:
        self._http_session = aiohttp.ClientSession()
    return self._http_session
```

**–≠—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ!** –ù–æ –ø—Ä–æ–≤–µ—Ä—å —Ñ—É–Ω–∫—Ü–∏—é `fetch_prices()` (—Å—Ç—Ä–æ–∫–∞ ~100):

**–ù–∞–π—Ç–∏:**
```python
session = await self._get_http_session()

try:
    async with session.get(self.PRICES_URL, timeout=aiohttp.ClientTimeout(total=30)) as resp:
        # ... –∫–æ–¥ ...
```

**–≠—Ç–æ —É–∂–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ!** –í–µ–∑–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `async with`

---

### –§–∞–π–ª 3: `rust-p2p-bot/src/dmarket_api.py`

**–ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —ç—Ç–æ—Ç —Ñ–∞–π–ª!** –ï—Å–ª–∏ —Ç–∞–º –µ—Å—Ç—å `requests.Session()` –±–µ–∑ `with`, –∏—Å–ø—Ä–∞–≤–∏—Ç—å.

**–¢–µ—Å—Ç –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**
```bash
cd rust-p2p-bot
python main.py --test-connections
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ù–ï–¢ WARNING'–æ–≤ –ø—Ä–æ "unclosed session"

---

## ‚úÖ –®–ê–ì 1.2: –ò—Å–ø—Ä–∞–≤–∏—Ç—å NoneType –æ—à–∏–±–∫–∏ (10 –º–∏–Ω)

### –§–∞–π–ª: `rust-p2p-bot/src/pulse_api.py`

**–ù–∞–π—Ç–∏ —Ñ—É–Ω–∫—Ü–∏—é `compare_tables()` —Å—Ç—Ä–æ–∫–∞ ~150:**

```python
for item in data:
    if not item:
        continue
        
    first_info = item.get('firstMarketInfo') or {}
    second_info = item.get('secondMarketInfo') or {}
    
    buy_price = first_info.get('priceUsd', 0) or 0
    sell_price = second_info.get('priceUsd', 0) or 0
```

**–ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞:**

```python
for item in data:
    if not item:
        continue
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ None –¥–ª—è firstMarketInfo
    first_info = item.get('firstMarketInfo')
    if first_info is None:
        continue
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ None –¥–ª—è secondMarketInfo
    second_info = item.get('secondMarketInfo')
    if second_info is None:
        continue
    
    buy_price = first_info.get('priceUsd', 0) or 0
    sell_price = second_info.get('priceUsd', 0) or 0
    
    # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –µ—Å–ª–∏ —Ü–µ–Ω—ã –Ω—É–ª–µ–≤—ã–µ
    if buy_price <= 0 or sell_price <= 0:
        continue
```

**–¢–µ—Å—Ç:**
```bash
python main.py --test-trade
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ù–∞—Ö–æ–¥—è—Ç—Å—è —Å–ø—Ä–µ–¥—ã –ë–ï–ó –æ—à–∏–±–æ–∫ NoneType

---

## ‚úÖ –®–ê–ì 1.3: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Selenium –∏ ChromeDriver (10 –º–∏–Ω)

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Selenium:
```bash
pip install selenium
pip freeze > requirements.txt
```

### 2. –°–∫–∞—á–∞—Ç—å ChromeDriver:

**–í–∞—Ä–∏–∞–Ω—Ç A: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
```bash
pip install webdriver-manager
```

**–í–∞—Ä–∏–∞–Ω—Ç B: –í—Ä—É—á–Ω—É—é**
1. –û—Ç–∫—Ä—ã—Ç—å: https://chromedriver.chromium.org/downloads
2. –°–∫–∞—á–∞—Ç—å –≤–µ—Ä—Å–∏—é –¥–ª—è Windows
3. –†–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å `chromedriver.exe`
4. –ü–æ–ª–æ–∂–∏—Ç—å –≤ –ø–∞–ø–∫—É: `rust-p2p-bot/drivers/chromedriver.exe`

### 3. –°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É drivers:
```bash
mkdir rust-p2p-bot\drivers
```

---

## ‚úÖ –®–ê–ì 1.4: –°–æ–∑–¥–∞—Ç—å TradeIt.gg –º–æ–¥—É–ª—å (25 –º–∏–Ω)

### 1. –û—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
```
rust-p2p-bot/src/tradeit.py
```

### 2. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –í–ï–°–¨ –∫–æ–¥ –∏–∑ —Ñ–∞–π–ª–∞:
```
TRADEIT_GG_GUIDE.md
```

**–ù–∞—á–∏–Ω–∞—è —Å–æ —Å—Ç—Ä–æ–∫–∏ "```python" –∏ –¥–æ –∫–æ–Ω—Ü–∞ –∫–æ–¥–∞**

### 3. –ó–∞–ø–æ–ª–Ω–∏—Ç—å —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:

**–ù–∞–π—Ç–∏ —Å—Ç—Ä–æ–∫–∏ 20-21:**
```python
LOGIN_EMAIL = "–í–ê–®_EMAIL_–î–õ–Ø_TRADEIT"
LOGIN_PASSWORD = "–í–ê–®_–ü–ê–†–û–õ–¨_–î–õ–Ø_TRADEIT"
```

**–ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ –¥–ª—è TradeIt.gg**

### 4. –û–±–Ω–æ–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç –≤ main.py:

**–§–∞–π–ª:** `rust-p2p-bot/main.py`

**–ù–∞–π—Ç–∏ —Å—Ç—Ä–æ–∫—É ~20:**
```python
from src.tradeit import TradeItBot
```

**–ï—Å–ª–∏ –µ—ë –Ω–µ—Ç - –¥–æ–±–∞–≤–∏—Ç—å!**

### 5. –¢–µ—Å—Ç:

**–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª:** `rust-p2p-bot/test_tradeit.py`

```python
import asyncio
from src.tradeit import TradeItBot

async def test():
    bot = TradeItBot()
    
    try:
        # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±—Ä–∞—É–∑–µ—Ä–∞
        await bot.init_browser(headless=False)  # –° GUI –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
        
        # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
        success = await bot.login()
        print(f"Login: {'‚úÖ' if success else '‚ùå'}")
        
        # –ë–∞–ª–∞–Ω—Å
        balance = await bot.get_balance()
        print(f"Balance: ${balance:.2f}")
        
        # –ü–æ–∏—Å–∫ –ø—Ä–µ–¥–º–µ—Ç–∞
        item = await bot.search_item("AK-47")
        if item:
            print(f"Found: {item['name']} - ${item['price']:.2f}")
        
    finally:
        await bot.close()

if __name__ == '__main__':
    asyncio.run(test())
```

**–ó–∞–ø—É—Å—Ç–∏—Ç—å:**
```bash
cd rust-p2p-bot
python test_tradeit.py
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
Login: ‚úÖ
Balance: $28.00
Found: AK-47 Victoria - $68.80
```

---

## üéØ –ß–ï–ö–õ–ò–°–¢ –§–ê–ó–´ 1:

- [ ] –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã unclosed sessions –≤ pulse_api.py
- [ ] –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã unclosed sessions –≤ lootfarm.py
- [ ] –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã unclosed sessions –≤ dmarket_api.py
- [ ] –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã NoneType –æ—à–∏–±–∫–∏ –≤ pulse_api.py
- [ ] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Selenium: `pip install selenium`
- [ ] –°–∫–∞—á–∞–Ω ChromeDriver –≤ drivers/
- [ ] –°–æ–∑–¥–∞–Ω src/tradeit.py —Å –ø–æ–ª–Ω—ã–º –∫–æ–¥–æ–º
- [ ] –ó–∞–ø–æ–ª–Ω–µ–Ω—ã LOGIN_EMAIL –∏ LOGIN_PASSWORD
- [ ] –¢–µ—Å—Ç `python test_tradeit.py` –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ

---

## ‚úÖ –†–ï–ó–£–õ–¨–¢–ê–¢ –§–ê–ó–´ 1:

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤:
- ‚úÖ –ù–µ—Ç —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏
- ‚úÖ –ù–µ—Ç NoneType –æ—à–∏–±–æ–∫
- ‚úÖ TradeIt.gg –º–æ–∂–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è
- ‚úÖ TradeIt.gg –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å –±–∞–ª–∞–Ω—Å $28
- ‚úÖ TradeIt.gg –º–æ–∂–µ—Ç –∏—Å–∫–∞—Ç—å –ø—Ä–µ–¥–º–µ—Ç—ã
- ‚úÖ –í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ crashes

---

## ‚û°Ô∏è –°–õ–ï–î–£–Æ–©–ò–ô –®–ê–ì:

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –§–ê–ó–´ 1 –ø–µ—Ä–µ—Ö–æ–¥–∏ –∫ **–§–ê–ó–ï 2: –ü–ï–†–ï–î–ï–õ–ö–ê –ê–õ–ì–û–†–ò–¢–ú–ê**

–û—Ç–∫—Ä–æ–π —Ñ–∞–π–ª: `README_–ò–¢–û–ì–û–í–´–ô.md` ‚Üí —Ä–∞–∑–¥–µ–ª "–§–ê–ó–ê 2"
